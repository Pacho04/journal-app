{"ast":null,"code":"import _regeneratorRuntime from\"/home/david/Escritorio/React/08-journal-app-19/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/david/Escritorio/React/08-journal-app-19/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/david/Escritorio/React/08-journal-app-19/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{firebase}from'../firebase/firebase-config';import{useDispatch}from'react-redux';import AuthRouter from'./AuthRouter';import{JournalScreen}from'../components/journal/JournalScreen';import{login}from'../actions/auth';import{PrivateRouter}from'./PrivateRouter';import{PublicRouter}from'./PublicRouter';import{BrowserRouter as Router,Switch,Redirect}from\"react-router-dom\";import{startLoadingNotes}from'../actions/notes';export var AppRouter=function AppRouter(){var dispatch=useDispatch();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),cheking=_useState2[0],setCheking=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoggedIn=_useState4[0],setIsLoggedIn=_useState4[1];useEffect(function(){firebase.auth().onAuthStateChanged(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(user){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(user===null||user===void 0?void 0:user.uid){dispatch(login(user.uid,user.displayName));setIsLoggedIn(true);dispatch(startLoadingNotes(user.uid));}else{setIsLoggedIn(false);}setCheking(false);case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());},[dispatch,setCheking,setIsLoggedIn]);if(cheking){return/*#__PURE__*/React.createElement(\"h1\",null,\"Wait...\");}return/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(PublicRouter,{path:\"/auth\",isAuthenticated:isLoggedIn,component:AuthRouter}),/*#__PURE__*/React.createElement(PrivateRouter,{exact:true,path:\"/\",isAuthenticated:isLoggedIn,component:JournalScreen}),/*#__PURE__*/React.createElement(Redirect,{to:\"/auth/login\"}))));};","map":{"version":3,"sources":["/home/david/Escritorio/React/08-journal-app-19/src/routers/AppRouter.js"],"names":["React","useEffect","useState","firebase","useDispatch","AuthRouter","JournalScreen","login","PrivateRouter","PublicRouter","BrowserRouter","Router","Switch","Redirect","startLoadingNotes","AppRouter","dispatch","cheking","setCheking","isLoggedIn","setIsLoggedIn","auth","onAuthStateChanged","user","uid","displayName"],"mappings":"4eAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,QAAT,KAAwB,6BAAxB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,OAASC,aAAT,KAA8B,qCAA9B,CACA,OAASC,KAAT,KAAsB,iBAAtB,CACA,OAASC,aAAT,KAA8B,iBAA9B,CACA,OAASC,YAAT,KAA6B,gBAA7B,CACA,OACIC,aAAa,GAAIC,CAAAA,MADrB,CAEIC,MAFJ,CAGIC,QAHJ,KAIO,kBAJP,CAKA,OAAQC,iBAAR,KAAiC,kBAAjC,CAEA,MAAO,IAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CAE3B,GAAMC,CAAAA,QAAQ,CAAGZ,WAAW,EAA5B,CAF2B,cAIGF,QAAQ,CAAC,IAAD,CAJX,wCAIpBe,OAJoB,eAIXC,UAJW,8BAMShB,QAAQ,CAAC,KAAD,CANjB,yCAMpBiB,UANoB,eAMRC,aANQ,eAQ3BnB,SAAS,CAAC,UAAM,CACZE,QAAQ,CAACkB,IAAT,GAAgBC,kBAAhB,0FAAoC,iBAAMC,IAAN,kHAEhC,GAAGA,IAAH,SAAGA,IAAH,iBAAGA,IAAI,CAAEC,GAAT,CAAa,CACTR,QAAQ,CAACT,KAAK,CAACgB,IAAI,CAACC,GAAN,CAAWD,IAAI,CAACE,WAAhB,CAAN,CAAR,CACAL,aAAa,CAAC,IAAD,CAAb,CACAJ,QAAQ,CAACF,iBAAiB,CAACS,IAAI,CAACC,GAAN,CAAlB,CAAR,CAEH,CALD,IAKK,CACDJ,aAAa,CAAC,KAAD,CAAb,CACH,CAEDF,UAAU,CAAC,KAAD,CAAV,CAXgC,sDAApC,gEAeH,CAhBQ,CAgBN,CAACF,QAAD,CAAWE,UAAX,CAAuBE,aAAvB,CAhBM,CAAT,CAkBA,GAAGH,OAAH,CAAW,CACP,mBACI,wCADJ,CAGH,CAED,mBACI,oBAAC,MAAD,mBACI,4CACI,oBAAC,MAAD,mBACI,oBAAC,YAAD,EAAc,IAAI,CAAC,OAAnB,CAA2B,eAAe,CAAEE,UAA5C,CAAwD,SAAS,CAAEd,UAAnE,EADJ,cAGI,oBAAC,aAAD,EAAe,KAAK,KAApB,CAAqB,IAAI,CAAC,GAA1B,CAA8B,eAAe,CAAEc,UAA/C,CAA2D,SAAS,CAAEb,aAAtE,EAHJ,cAKI,oBAAC,QAAD,EAAU,EAAE,CAAC,aAAb,EALJ,CADJ,CADJ,CADJ,CAeH,CA/CM","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { firebase} from '../firebase/firebase-config';\nimport { useDispatch } from 'react-redux';\nimport AuthRouter from './AuthRouter';\nimport { JournalScreen } from '../components/journal/JournalScreen';\nimport { login } from '../actions/auth';\nimport { PrivateRouter } from './PrivateRouter';\nimport { PublicRouter } from './PublicRouter';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Redirect\n} from \"react-router-dom\";\nimport {startLoadingNotes } from '../actions/notes';\n\nexport const AppRouter = () => {\n\n    const dispatch = useDispatch();\n\n    const [cheking, setCheking] = useState(true);\n\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n    useEffect(() => {\n        firebase.auth().onAuthStateChanged( async(user) => {\n            \n            if(user?.uid){\n                dispatch(login(user.uid, user.displayName));\n                setIsLoggedIn(true);\n                dispatch(startLoadingNotes(user.uid));\n\n            }else{\n                setIsLoggedIn(false);\n            }\n\n            setCheking(false);\n            \n        });\n\n    }, [dispatch, setCheking, setIsLoggedIn])\n\n    if(cheking){\n        return(\n            <h1>Wait...</h1>\n        )\n    }\n\n    return (\n        <Router>\n            <div>\n                <Switch>\n                    <PublicRouter path=\"/auth\" isAuthenticated={isLoggedIn} component={AuthRouter} />\n\n                    <PrivateRouter exact path=\"/\" isAuthenticated={isLoggedIn} component={JournalScreen} />\n\n                    <Redirect to=\"/auth/login\"/>\n                </Switch>\n            </div>\n\n\n        </Router>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}